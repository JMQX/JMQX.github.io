<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JS中DOM操作、事件绑定、监听、委托及event对象详解 | 江民钦的博客</title>

  
  <meta name="author" content="JiangMinQin">
  

  
  <meta name="description" content="在JavaScript中最不得不提起的就是对DOM节点的操作以及它的事件机制，对于其中的细节之处，往往是一个前端开发者必须要掌握的。
DOM操作1.访问节点document.getElementById(id);返回对拥有指定id的第一个对象进行访问
document.getElementsByName(name);">
  

  
  
  <meta name="keywords" content="JavaScript">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="JS中DOM操作、事件绑定、监听、委托及event对象详解"/>

  <meta property="og:site_name" content="江民钦的博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="江民钦的博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">江民钦的博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>JS中DOM操作、事件绑定、监听、委托及event对象详解</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/05/06/JS中DOM操作、事件绑定、监听、委托及event对象详解/" rel="bookmark">
        <time class="entry-date published" datetime="2017-05-06T10:57:47.000Z">
          2017-05-06
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>在JavaScript中最不得不提起的就是对DOM节点的操作以及它的事件机制，对于其中的细节之处，往往是一个前端开发者必须要掌握的。</p>
<h2 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h2><h3 id="1-访问节点"><a href="#1-访问节点" class="headerlink" title="1.访问节点"></a>1.访问节点</h3><p>document.getElementById(id);<br>返回对拥有指定id的第一个对象进行访问</p>
<p>document.getElementsByName(name);<br><a id="more"></a><br>返回带有指定名称的节点集合<br>注意:Elements</p>
<p>document.getElementsByTagName(tagname);<br>返回带有指定标签名的对象集合<br>注意：Elements</p>
<p>document.getElementsByClassName(classname);<br>返回带有指定class名称的对象集合</p>
<h3 id="2-生成节点"><a href="#2-生成节点" class="headerlink" title="2.生成节点"></a>2.生成节点</h3><p>document.createElement(eName);<br>创建一个节点</p>
<p>document.createAttribute(attrName);<br>对某个节点创建属性</p>
<p>document.createTextNode(text);<br>创建文本节点</p>
<p>3.添加节点<br>document.insertBefore(newNode,referenceChild);<br>在某个节点前插入节点</p>
<p>parentNode.appendChild(newNode);<br>给某个节点添加子节点</p>
<h3 id="4-复制节点"><a href="#4-复制节点" class="headerlink" title="4.复制节点"></a>4.复制节点</h3><p>cloneNode(true | false);<br>复制某个节点<br>参数：是否复制原节点的所有属性</p>
<h3 id="5-删除节点"><a href="#5-删除节点" class="headerlink" title="5.删除节点"></a>5.删除节点</h3><p>parentNode.removeChild(node)<br>删除某个节点的子节点<br>node是要删除的节点</p>
<h3 id="6-修改文本节点"><a href="#6-修改文本节点" class="headerlink" title="6.修改文本节点"></a>6.修改文本节点</h3><p>appendData(data);<br>将data加到文本节点后面</p>
<p>deleteData(start,length);<br>将从start处删除length个字符</p>
<p>insertData(start,data)<br>在start处插入字符,start的开始值是0;</p>
<p>replaceData(start,length,data)<br>在start处用data替换length个字符</p>
<p>splitData(offset)<br>在offset处分割文本节点</p>
<p>substringData(start,length)<br>从start处提取length个字符</p>
<h3 id="7-属性操作"><a href="#7-属性操作" class="headerlink" title="7.属性操作"></a>7.属性操作</h3><p>getAttribute(name)<br>通过属性名称获取某个节点属性的值</p>
<p>setAttribute(name,value);<br>修改某个节点属性的值</p>
<p>removeAttribute(name)<br>删除某个属性</p>
<h3 id="8-查找节点"><a href="#8-查找节点" class="headerlink" title="8.查找节点"></a>8.查找节点</h3><p>parentObj.firstChild<br>如果节点为已知节点的第一个子节点就可以使用这个方法。此方法可以递归进行使用<br>parentObj.firstChild.firstChild…..</p>
<p>parentObj.lastChild<br>获得一个节点的最后一个节点，与firstChild一样也可以进行递归使用<br>parentObj.lastChild.lastChild…..</p>
<p>parentObj.childNodes<br>获得节点的所有子节点，然后通过循环和索引找到目标节点</p>
<h3 id="9-获取相邻的节点"><a href="#9-获取相邻的节点" class="headerlink" title="9.获取相邻的节点"></a>9.获取相邻的节点</h3><p>neborNode.previousSibling :获取已知节点的相邻的上一个节点<br>nerbourNode.nextSlbling: 获取已知节点的下一个节点</p>
<h3 id="10-获取父节点"><a href="#10-获取父节点" class="headerlink" title="10.获取父节点"></a>10.获取父节点</h3><p>childNode.parentNode:得到已知节点的父节点</p>
<h3 id="11替换节点"><a href="#11替换节点" class="headerlink" title="11替换节点"></a>11替换节点</h3><p>方法replace(new,old)</p>
<h3 id="JS-innerHTML和innerText区别"><a href="#JS-innerHTML和innerText区别" class="headerlink" title="JS innerHTML和innerText区别"></a>JS innerHTML和innerText区别</h3><p>1、innerHTML:<br>　　也就是从对象的起始位置到终止位置的全部内容,包括Html标签。<br>2、innerText:<br>  　从起始位置到终止位置的内容, 但它去除Html标签 </p>
<h2 id="事件机制"><a href="#事件机制" class="headerlink" title="事件机制"></a>事件机制</h2><p>总所周知，在JavaScript中事件采用绑定监听这种形式。我们可以在DOM元素上绑定onclick、onmouseover、onmouseout、onmousedown、onmouseup、ondblclick、onkeydown、onkeypress、onkeyup等</p>
<h3 id="在JavaScript代码中绑定事件"><a href="#在JavaScript代码中绑定事件" class="headerlink" title="在JavaScript代码中绑定事件"></a>在JavaScript代码中绑定事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;button&quot; value=&quot;click me&quot; id=&quot;btn&quot;&gt;</div><div class="line">&lt;script&gt;</div><div class="line">document.getElementById(&quot;btn&quot;).onclick = function()&#123;</div><div class="line"> alert(&quot;hello world!&quot;);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="在html中添加事件函数"><a href="#在html中添加事件函数" class="headerlink" title="在html中添加事件函数"></a>在html中添加事件函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;button&quot; value=&quot;click me&quot; id=&quot;btn&quot; onclick=&quot;btnClick()&quot;&gt;</div><div class="line">&lt;script&gt;</div><div class="line">function btnClick()&#123;</div><div class="line"> alert(&quot;hello world!&quot;);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="绑定事件监听器"><a href="#绑定事件监听器" class="headerlink" title="绑定事件监听器"></a>绑定事件监听器</h3><p>W3C规范</p>
<p>语法：</p>
<p>element.addEventListener(event, function, useCapture)</p>
<p>event : （必需）事件名，支持所有 DOM事件 。</p>
<p>function：（必需）指定要事件触发时执行的函数。</p>
<p>useCapture：（可选）指定事件是否在捕获或冒泡阶段执行。true，捕获。false，冒泡。默认false。<br>注：IE8以下不支持。</p>
<p>IE标准</p>
<p>语法：</p>
<p>element.attachEvent(event, function)</p>
<p>event：（必需）事件类型。需加“on“，例如：onclick。</p>
<p>function：（必需）指定要事件触发时执行的函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;button&quot; value=&quot;click me&quot; id=&quot;btn&quot;&gt;</div><div class="line">&lt;script&gt;</div><div class="line">document.getElementById(&apos;btn&apos;).addEventListener(&quot;click&quot;, btnClick, false);</div><div class="line">function btnClick()&#123;</div><div class="line"> alert(&quot;hello world!&quot;);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h3 id="移除事件"><a href="#移除事件" class="headerlink" title="移除事件"></a>移除事件</h3><p>element.removeEventListener(event,function);<br>IE下：element.detachEvent(event,function);</p>
<h3 id="事件模型"><a href="#事件模型" class="headerlink" title="事件模型"></a>事件模型</h3><p>但值得注意的是JavaScript中事件模型分为两种————冒泡模型和捕获模型，也称事件冒泡和事件捕获。<br>（1）事件冒泡：指事件按照从最特定的事件目标到最不特定的事件目标的顺序触发。通俗一点，在html文档中，DOM节点成呈树状结构，从最特点的事件目标即直接发生的DOM节点到最不特点发生的事件目标即html的document对象传递，这个过程称为事件冒泡。<br>（2）事件捕获：事件从最不精确的document对象开始触发，到最特定最精确的事件目标。简而言之，就是和事件冒泡完全相反的两个动作。<br>（3）DOM事件流：同时支持两种事件模型：捕获型事件和冒泡型事件，但是，捕获型事件先发生。两种事件流会触及DOM中的所有对象，从document对象开始，也在document对象结束。<br>DOM事件模型最独特的性质是，文本节点也触发事件(在IE中不会)。</p>
<h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>事件委托就是利用冒泡的原理，把事件加给父元素或祖先元素上，触发执行效果。事件委托的有点，可以避免多个同类型节点添加同一事件处理，减少内存占用，提高事件的处理速度，优化网页性能。</p>
<p>比如给一个里边的每一项添加事件：</p>
<p>传统写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;ul id=&quot;group&quot;&gt;</div><div class="line">    &lt;li&gt;item1&lt;/li&gt;</div><div class="line">    &lt;li&gt;item2&lt;/li&gt;</div><div class="line">    &lt;li&gt;item3&lt;/li&gt;</div><div class="line">    &lt;li&gt;item4&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var items=document.getElementsByTagName(&apos;li&apos;);</div><div class="line">    for(var i=0;i&lt;items.length;i++)&#123;</div><div class="line">        items[i].onclick=function()&#123;</div><div class="line">            this.style.color=&apos;red&apos;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>事件委托写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;ul id=&quot;group&quot;&gt;</div><div class="line">    &lt;li&gt;item1&lt;/li&gt;</div><div class="line">    &lt;li&gt;item2&lt;/li&gt;</div><div class="line">    &lt;li&gt;item3&lt;/li&gt;</div><div class="line">    &lt;li&gt;item4&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var group=document.getElementById(&apos;group&apos;);</div><div class="line">    group.onclick=function(event)&#123;</div><div class="line">        var target=event.target;</div><div class="line">        target.style.color=&apos;red&apos;;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>当然函数阻止事件冒泡可以使用event.stopPropagation().<br>还有阻止事件的默认行为的方法有event.preventDefault()</p>
<h2 id="Event对象"><a href="#Event对象" class="headerlink" title="Event对象"></a>Event对象</h2><ol>
<li><p>type：事件的类型，如onlick中的click；</p>
</li>
<li><p>srcElement/target：事件源，就是发生事件的元素；</p>
</li>
<li><p>button：声明被按下的鼠标键，整数，1代表左键，2代表右键，4代表中键，如果按下多个键，酒把这些值加起来，所以3就代表左右键同时按下；（firefox中 0代表左键，1代表中间键，2代表右键）</p>
</li>
<li><p>clientX/clientY：事件发生的时候，鼠标相对于浏览器窗口可视文档区域的左上角的位置；(在DOM标准中，这两个属性值都不考虑文档的滚动情况，也就是说，无论文档滚动到哪里，只要事件发生在窗口左上角，clientX和clientY都是 0，所以在IE中，要想得到事件发生的坐标相对于文档开头的位置，要加上<br>document.body.scrollLeft和 document.body.scrollTop)</p>
</li>
<li><p>offsetX,offsetY/layerX,layerY：事件发生的时候，鼠标相对于源元素左上角的位置；</p>
</li>
<li><p>x,y/pageX,pageY：检索相对于父要素鼠标水平坐标的整数；</p>
</li>
<li><p>altKey,ctrlKey,shiftKey等：返回一个布尔值；</p>
</li>
<li><p>keyCode：返回keydown何keyup事件发生的时候按键的代码，以及keypress 事件的Unicode字符；(firefox2不支持 event.keycode，可以用 event.which替代 )</p>
</li>
<li><p>fromElement,toElement：前者是指代mouseover事件中鼠标移动过的文档元素，后者指代mouseout事件中鼠标移动到的文档元素；</p>
</li>
<li><p>cancelBubble：一个布尔属性，把它设置为true的时候，将停止事件进一步起泡到包容层次的元素；(e.cancelBubble = true; 相当于 e.stopPropagation();)</p>
</li>
<li><p>returnValue：一个布尔属性，设置为false的时候可以组织浏览器执行默认的事件动作；(e.returnValue = false; 相当于 e.preventDefault();)</p>
</li>
<li><p>attachEvent(),detachEvent()/addEventListener(),removeEventListener：为制定 DOM对象事件类型注册多个事件处理函数的方法，它们有两个参数，第一个是事件类型，第二个是事件处理函数。在<br>attachEvent()事件执行的时候，this关键字指向的是window对象，而不是发生事件的那个元素；</p>
</li>
<li><p>screenX、screenY：鼠标指针相对于显示器左上角的位置，如果你想打开新的窗口，这两个属性很重要；</p>
</li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/JavaScript/">JavaScript</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 JiangMinQin
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>